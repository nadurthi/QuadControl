//============================================================================
// Name        : UDP_comm_test.cpp
// Author      : Nagnanamus
// Version     :
// Copyright   : Do what ever you want!!! I am not responsible
// Description : Hello World in C++, Ansi-style
//============================================================================

#include <iostream>
using namespace std;
#include "udpPort.h"
int main() {
	udpPort TxUDP,RxUDP;


	char addressTx[30]="10.0.0.3";
	TxUDP.OpenPort_write(addressTx,1234);

	char addressRx[30]="10.0.0.6";
	RxUDP.OpenPort_read(addressRx,4321);


	char txbuffer[100]="Send Data";
	char rxbuffer[100];

int i=0;
	while(1){
		snprintf(txbuffer,100,"Send on onboard = %d\n",i++);
		//cout<<"Sending = "<<txbuffer<<endl;
		TxUDP.write(txbuffer,100);
		cout<<txbuffer;

	if(RxUDP.CheckData()>=0){
		RxUDP.ReadPort(rxbuffer,100);
		cout<<rxbuffer<<endl;

	}
	usleep(10000);

	}

	return 0;
}
